
EASY QUERY 

SENSOR DATA:
    SET search_path TO gman_a35, public;
    SELECT alias.value AS measurement, alias.date AS timestamp 
    FROM (SELECT sv.name_sens, sv.value, sv.date FROM sensor_vec AS sv, sensor AS s WHERE s.mote_id=1 AND sv.name_sens='TEMP1') AS alias 
    WHERE alias.date BETWEEN '2021-05-14 10:58:05' AND '2021-05-15 10:58:59'

ACTUATOR DATA:


CONFIGURATION DATA:
    SET search_path TO gman_a35, public;
    UPDATE mote
    SET section_id = CASE 
                 WHEN mote.section_id<>t1.section_id THEN t1.section_id
                 WHEN mote.section_id=t1.section_id THEN mote.section_id-1
                 END
    FROM (SELECT section.section_id FROM section
      ORDER BY section.section_id DESC) AS t1
    RETURNING mote.mote_id AS Sensor,mote.section_id AS Cell
    
///////////////////// TESTES
    SET search_path TO gman_a35, public;
    UPDATE mote
    SET section_id=t1.section_id
    FROM(SELECT section.section_id FROM section
          ORDER BY section.section_id DESC) AS t1
    WHERE mote.section_id!=t1.section_id
    RETURNING mote.mote_id,mote.section_id
    
    SET search_path TO gman_a35, public;
    UPDATE mote
    SET section_id = CASE 
                 WHEN mote.section_id!=t1.section_id THEN t1.section_id
                 WHEN mote.section_id=t1.section_id THEN t1.section_id
                 END
    FROM (SELECT section.section_id FROM section
      ORDER BY section.section_id DESC) AS t1
    RETURNING mote.mote_id,mote.section_id
///////////////////

CONTROL RULE DATA:


ENERGY DATA:



MEDIUM QUERY


SENSOR DATA: 
    SET search_path TO gman_a35,public;
    SELECT CONCAT('SECTION',t1.section) AS ROOM, t1.average AS average
      FROM (SELECT sensor_vec.name_sens AS section, AVG(sensor_vec.value) AS average FROM sensor_vec
             GROUP BY sensor_vec.name_sens) AS t1, sensor
      WHERE sensor.name=t1.section AND SUBSTRING(sensor.name, 1, length(sensor.name)-1 ) = 'TEMP'


ACTUATOR DATA:


CONFIGURATION DATA:


CONTROL RULE DATA:


ENERGY DATA:

